import {Panel} from "../Panel";
import {Text} from "../Text";
import {Button} from "../Button";
import {Title} from "../Title";
import {openVacancies} from "../../utils/openVacancies";
import {reachMetrikaGoal} from "../../utils/reachMetrikaGoal";
import styles from './FailPanel.module.scss'

export function FailPanel(props) {
  const {className, failsCount, onRetry} = props

  function handleRetry() {
    reachMetrikaGoal('fail')
    onRetry()
  }

  function handleOpenVacancies() {
    reachMetrikaGoal('sber_fail')
    openVacancies()
  }

  if (failsCount > 1) {
    return (
      <div className={className}>
        <Panel>
          <Title width="61" height="19">
            <path d="M6.408 14.568C6.696 14.568 6.92 14.536 7.08 14.472C7.256 14.392 7.4 14.264 7.512 14.088L0.36 1.2H4.8L9.432 9.72L13.152 1.2H17.184L11.328 14.112C10.96 14.928 10.592 15.6 10.224 16.128C9.856 16.64 9.472 17.056 9.072 17.376C8.688 17.68 8.28 17.888 7.848 18C7.432 18.128 6.984 18.192 6.504 18.192C6.04 18.192 5.592 18.144 5.16 18.048C4.744 17.952 4.424 17.856 4.2 17.76V13.896C4.472 14.104 4.808 14.272 5.208 14.4C5.608 14.512 6.008 14.568 6.408 14.568ZM30.9495 4.8H23.2695V18H19.4295V1.2H34.7895V18H30.9495V4.8ZM52.854 16.272C52.646 16.528 52.358 16.776 51.99 17.016C51.622 17.256 51.182 17.472 50.67 17.664C50.174 17.856 49.614 18.008 48.99 18.12C48.382 18.232 47.718 18.288 46.998 18.288C45.606 18.288 44.326 18.096 43.158 17.712C42.006 17.312 41.014 16.744 40.182 16.008C39.35 15.256 38.702 14.344 38.238 13.272C37.774 12.2 37.542 10.968 37.542 9.576C37.542 8.28 37.766 7.104 38.214 6.048C38.678 4.976 39.326 4.064 40.158 3.312C41.006 2.544 42.006 1.952 43.158 1.536C44.326 1.12 45.622 0.912 47.046 0.912C48.326 0.912 49.43 1.048 50.358 1.32C51.286 1.592 52.038 1.896 52.614 2.232V7.2C52.342 6.848 52.022 6.512 51.654 6.192C51.286 5.872 50.862 5.592 50.382 5.352C49.918 5.096 49.406 4.896 48.846 4.752C48.286 4.592 47.686 4.512 47.046 4.512C46.23 4.512 45.494 4.64 44.838 4.896C44.182 5.136 43.622 5.48 43.158 5.928C42.71 6.36 42.358 6.888 42.102 7.512C41.862 8.136 41.742 8.832 41.742 9.6C41.742 10.304 41.854 10.968 42.078 11.592C42.302 12.2 42.63 12.736 43.062 13.2C43.51 13.648 44.062 14.008 44.718 14.28C45.39 14.552 46.166 14.688 47.046 14.688C48.454 14.688 49.646 14.448 50.622 13.968C51.598 13.472 52.342 12.816 52.854 12V16.272ZM60.5108 12.48H56.6708V1.2H60.5108V12.48ZM56.4308 16.104C56.4308 15.8 56.4628 15.52 56.5268 15.264C56.6068 14.992 56.7268 14.76 56.8867 14.568C57.0628 14.36 57.2868 14.2 57.5588 14.088C57.8308 13.976 58.1748 13.92 58.5908 13.92C59.0228 13.92 59.3748 13.976 59.6468 14.088C59.9348 14.2 60.1588 14.36 60.3188 14.568C60.4948 14.76 60.6148 14.992 60.6788 15.264C60.7588 15.52 60.7988 15.8 60.7988 16.104C60.7988 16.696 60.6388 17.2 60.3188 17.616C60.0148 18.032 59.4388 18.24 58.5908 18.24C58.1748 18.24 57.8308 18.184 57.5588 18.072C57.2868 17.96 57.0628 17.808 56.8867 17.616C56.7268 17.424 56.6068 17.2 56.5268 16.944C56.4628 16.672 56.4308 16.392 56.4308 16.104Z" fill="url(#paint0_linear_497_95)"/>
            <defs>
              <linearGradient id="paint0_linear_497_95" x1="1.9871" y1="-15" x2="11.8432" y2="29.188" gradientUnits="userSpaceOnUse">
                <stop offset="0.370833" stopColor="#333F48"/>
                <stop offset="0.676307" stopColor="#005987"/>
                <stop offset="0.926223" stopColor="#6BCA54"/>
              </linearGradient>
            </defs>
          </Title>
          <Text className={styles.text}>
            Тапай ещё чаще или начни карьеру вместе с крупнейшим работодателем прямо сейчас.
          </Text>
        </Panel>
        <div className={styles.buttons}>
          <Button className={styles.button} variant='secondary' onClick={handleOpenVacancies}>Откликнуться</Button>
          <Button className={styles.button} variant='tertiary' size='sm' onClick={handleRetry}>
            Ещё раз
            <svg className={styles.icon} viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
              <path fillRule="evenodd" clipRule="evenodd" d="M12.3536 10.8839C11.8654 10.3957 11.8654 9.60427 12.3536 9.11612C12.8418 8.62796 13.6332 8.62796 14.1214 9.11612L20.0053 15L14.1214 20.8839C13.6332 21.372 12.8418 21.372 12.3536 20.8839C11.8654 20.3957 11.8654 19.6043 12.3536 19.1161L16.4697 15L12.3536 10.8839Z" fill="currentColor"/>
            </svg>
          </Button>
        </div>
      </div>
    )
  }

  return (
    <div className={className}>
      <Panel className={className}>
        <Title width="61" height="19">
          <path d="M6.408 14.568C6.696 14.568 6.92 14.536 7.08 14.472C7.256 14.392 7.4 14.264 7.512 14.088L0.36 1.2H4.8L9.432 9.72L13.152 1.2H17.184L11.328 14.112C10.96 14.928 10.592 15.6 10.224 16.128C9.856 16.64 9.472 17.056 9.072 17.376C8.688 17.68 8.28 17.888 7.848 18C7.432 18.128 6.984 18.192 6.504 18.192C6.04 18.192 5.592 18.144 5.16 18.048C4.744 17.952 4.424 17.856 4.2 17.76V13.896C4.472 14.104 4.808 14.272 5.208 14.4C5.608 14.512 6.008 14.568 6.408 14.568ZM30.9495 4.8H23.2695V18H19.4295V1.2H34.7895V18H30.9495V4.8ZM52.854 16.272C52.646 16.528 52.358 16.776 51.99 17.016C51.622 17.256 51.182 17.472 50.67 17.664C50.174 17.856 49.614 18.008 48.99 18.12C48.382 18.232 47.718 18.288 46.998 18.288C45.606 18.288 44.326 18.096 43.158 17.712C42.006 17.312 41.014 16.744 40.182 16.008C39.35 15.256 38.702 14.344 38.238 13.272C37.774 12.2 37.542 10.968 37.542 9.576C37.542 8.28 37.766 7.104 38.214 6.048C38.678 4.976 39.326 4.064 40.158 3.312C41.006 2.544 42.006 1.952 43.158 1.536C44.326 1.12 45.622 0.912 47.046 0.912C48.326 0.912 49.43 1.048 50.358 1.32C51.286 1.592 52.038 1.896 52.614 2.232V7.2C52.342 6.848 52.022 6.512 51.654 6.192C51.286 5.872 50.862 5.592 50.382 5.352C49.918 5.096 49.406 4.896 48.846 4.752C48.286 4.592 47.686 4.512 47.046 4.512C46.23 4.512 45.494 4.64 44.838 4.896C44.182 5.136 43.622 5.48 43.158 5.928C42.71 6.36 42.358 6.888 42.102 7.512C41.862 8.136 41.742 8.832 41.742 9.6C41.742 10.304 41.854 10.968 42.078 11.592C42.302 12.2 42.63 12.736 43.062 13.2C43.51 13.648 44.062 14.008 44.718 14.28C45.39 14.552 46.166 14.688 47.046 14.688C48.454 14.688 49.646 14.448 50.622 13.968C51.598 13.472 52.342 12.816 52.854 12V16.272ZM60.5108 12.48H56.6708V1.2H60.5108V12.48ZM56.4308 16.104C56.4308 15.8 56.4628 15.52 56.5268 15.264C56.6068 14.992 56.7268 14.76 56.8867 14.568C57.0628 14.36 57.2868 14.2 57.5588 14.088C57.8308 13.976 58.1748 13.92 58.5908 13.92C59.0228 13.92 59.3748 13.976 59.6468 14.088C59.9348 14.2 60.1588 14.36 60.3188 14.568C60.4948 14.76 60.6148 14.992 60.6788 15.264C60.7588 15.52 60.7988 15.8 60.7988 16.104C60.7988 16.696 60.6388 17.2 60.3188 17.616C60.0148 18.032 59.4388 18.24 58.5908 18.24C58.1748 18.24 57.8308 18.184 57.5588 18.072C57.2868 17.96 57.0628 17.808 56.8867 17.616C56.7268 17.424 56.6068 17.2 56.5268 16.944C56.4628 16.672 56.4308 16.392 56.4308 16.104Z" fill="url(#paint0_linear_497_95)"/>
          <defs>
            <linearGradient id="paint0_linear_497_95" x1="1.9871" y1="-15" x2="11.8432" y2="29.188" gradientUnits="userSpaceOnUse">
              <stop offset="0.370833" stopColor="#333F48"/>
              <stop offset="0.676307" stopColor="#005987"/>
              <stop offset="0.926223" stopColor="#6BCA54"/>
            </linearGradient>
          </defs>
        </Title>
        <Text className={styles.text}>
          Попробуй тапать чаще.
        </Text>
      </Panel>
      <div className={styles.buttons}>
        <Button className={styles.button} variant='secondary' onClick={handleRetry}>Ещё раз</Button>
      </div>
    </div>
  )
}
